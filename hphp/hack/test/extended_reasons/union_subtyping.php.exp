error: Typing[4110] Invalid return type

Expected `A`

10 | function foo(bool  $p, A $x, B $y): »A« {
11 |   if($p){
12 |     $z = $x;

But got `B`

10 | function foo(bool  $p, A $x, »B« $y): A {
11 |   if($p){
12 |     $z = $x;

Here's why: this hint

10 | function foo(bool  $p, A $x, »B« $y): A {
11 |   if($p){
12 |     $z = $x;

flows *into* this expression

10 | function foo(bool  $p, A $x, B »$y«): A {
11 |   if($p){
12 |     $z = $x;

which itself flows *into* this expression

 13 |   } else{
 14 |     $z = »$y«;
 15 |   }
 16 | 
 17 |   return $z;
 18 | }

which itself flows *into* this expression

 13 |   } else{
 14 |     »$z« = $y;
 15 |   }
 16 | 
 17 |   return $z;
 18 | }

which itself flows *into* this expression, via the union type

 10 | function foo(bool  $p, A $x, B $y): A {
 11 |   »if($p){
 12 |     $z = $x;
 13 |   } else{
 14 |     $z = $y;
 15 |   }«
 16 | 
 17 |   return $z;

which itself flows *into* this expression

 13 |   } else{
 14 |     $z = $y;
 15 |   }
 16 | 
 17 |   return »$z«;
 18 | }

which itself flows *into* this expression

 13 |   } else{
 14 |     $z = $y;
 15 |   }
 16 | 
 17 |   return »$z«;
 18 | }

which itself flows *into* this hint

10 | function foo(bool  $p, A $x, B $y): »A« {
11 |   if($p){
12 |     $z = $x;

error: Typing[4110] Invalid return type

Expected `C`

 21 | function union_l((A | B) $ab): »C« {
 22 |   return $ab;
 23 | }

But got `A`

 21 | function union_l((»A« | B) $ab): C {
 22 |   return $ab;
 23 | }

Here's why: this hint

 21 | function union_l((»A« | B) $ab): C {
 22 |   return $ab;
 23 | }

flows *into* this hint, via the union type

 21 | function union_l(»(A | B)« $ab): C {
 22 |   return $ab;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) »$ab«): C {
 22 |   return $ab;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) $ab): C {
 22 |   return »$ab«;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) $ab): C {
 22 |   return »$ab«;
 23 | }

which itself flows *into* this hint

 21 | function union_l((A | B) $ab): »C« {
 22 |   return $ab;
 23 | }

error: Typing[4110] Invalid return type

Expected `C`

 21 | function union_l((A | B) $ab): »C« {
 22 |   return $ab;
 23 | }

But got `B`

 21 | function union_l((A | »B«) $ab): C {
 22 |   return $ab;
 23 | }

Here's why: this hint

 21 | function union_l((A | »B«) $ab): C {
 22 |   return $ab;
 23 | }

flows *into* this hint, via the union type

 21 | function union_l(»(A | B)« $ab): C {
 22 |   return $ab;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) »$ab«): C {
 22 |   return $ab;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) $ab): C {
 22 |   return »$ab«;
 23 | }

which itself flows *into* this expression

 21 | function union_l((A | B) $ab): C {
 22 |   return »$ab«;
 23 | }

which itself flows *into* this hint

 21 | function union_l((A | B) $ab): »C« {
 22 |   return $ab;
 23 | }

error: Typing[4110] Invalid return type

Expected `B`

 25 | function union_r(C $c): (A|»B«) {
 26 |   return $c;
 27 | }

But got `C`

 25 | function union_r(»C« $c): (A|B) {
 26 |   return $c;
 27 | }

Here's why: this hint

 25 | function union_r(»C« $c): (A|B) {
 26 |   return $c;
 27 | }

flows *into* this expression

 25 | function union_r(C »$c«): (A|B) {
 26 |   return $c;
 27 | }

which itself flows *into* this expression

 25 | function union_r(C $c): (A|B) {
 26 |   return »$c«;
 27 | }

which itself flows *into* this expression

 25 | function union_r(C $c): (A|B) {
 26 |   return »$c«;
 27 | }

which itself flows *into* this hint

 25 | function union_r(C $c): »(A|B)« {
 26 |   return $c;
 27 | }

which itself flows *into* this hint, via the union type

 25 | function union_r(C $c): (A|»B«) {
 26 |   return $c;
 27 | }

4 errors found.
