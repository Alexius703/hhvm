error: Typing[4057] Invalid argument

The field `b` is missing

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

The field `b` is defined

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape(»'b'« => int);
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 31, character 24 - line 31, character 26:

Here's why: this hint

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => »int«);
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 31, character 31 - line 31, character 33:

flows *into* this hint, via the required shape field `'b'`

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = »shape('b' => int)«;
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 31, character 18 - line 31, character 34:

which itself flows *into* this hint

 57 | function passes_missing_a_alias(
 58 |   »missing_a« $s,
 59 | ): void {
 60 |   expects_required_a_at_int_alias($s);
 61 | }

File "shape_subtyping.php", line 58, character 3 - line 58, character 11:

which itself flows *into* this expression

 57 | function passes_missing_a_alias(
 58 |   missing_a »$s«,
 59 | ): void {
 60 |   expects_required_a_at_int_alias($s);
 61 | }

File "shape_subtyping.php", line 58, character 13 - line 58, character 14:

which itself flows *into* this expression

 57 | function passes_missing_a_alias(
 58 |   missing_a $s,
 59 | ): void {
 60 |   expects_required_a_at_int_alias(»$s«);
 61 | }

File "shape_subtyping.php", line 60, character 35 - line 60, character 36:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 57 | function passes_missing_a_alias(
 58 |   missing_a $s,
 59 | ): void {
 60 |   »expects_required_a_at_int_alias«($s);
 61 | }

File "shape_subtyping.php", line 60, character 3 - line 60, character 33:

which itself flows *from* this declaration

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);
 32 | 
 33 | function »expects_required_a_at_int_alias«(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 33, character 10 - line 33, character 40:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

which itself flows *into* this hint

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | »required_a_at_int« $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 34, character 1 - line 34, character 17:

which itself flows *into* nothing, via the non-existent shape field `'b'`


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

The field `a` is missing

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = »shape('b' => int)«;
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 31, character 18 - line 31, character 34:

The field `a` is defined

 27 | type required_a_at_int = shape(»'a'« => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);

File "shape_subtyping.php", line 27, character 32 - line 27, character 34:

Here's why: nothing


File "", line 0, character 0 - line 0, character -1:

flows *into* this hint, via the non-existent shape field `'a'`

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = »shape('b' => int)«;
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 31, character 18 - line 31, character 34:

which itself flows *into* this hint

 57 | function passes_missing_a_alias(
 58 |   »missing_a« $s,
 59 | ): void {
 60 |   expects_required_a_at_int_alias($s);
 61 | }

File "shape_subtyping.php", line 58, character 3 - line 58, character 11:

which itself flows *into* this expression

 57 | function passes_missing_a_alias(
 58 |   missing_a »$s«,
 59 | ): void {
 60 |   expects_required_a_at_int_alias($s);
 61 | }

File "shape_subtyping.php", line 58, character 13 - line 58, character 14:

which itself flows *into* this expression

 57 | function passes_missing_a_alias(
 58 |   missing_a $s,
 59 | ): void {
 60 |   expects_required_a_at_int_alias(»$s«);
 61 | }

File "shape_subtyping.php", line 60, character 35 - line 60, character 36:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 57 | function passes_missing_a_alias(
 58 |   missing_a $s,
 59 | ): void {
 60 |   »expects_required_a_at_int_alias«($s);
 61 | }

File "shape_subtyping.php", line 60, character 3 - line 60, character 33:

which itself flows *from* this declaration

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);
 32 | 
 33 | function »expects_required_a_at_int_alias«(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 33, character 10 - line 33, character 40:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

which itself flows *into* this hint

 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);
 32 | 
 33 | function expects_required_a_at_int_alias(
 34 | »required_a_at_int« $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 34, character 1 - line 34, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

error: Typing[4110] Invalid argument

Expected `int`

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

But got `bool`

 8 | function passes_required_a_at_bool(
 9 |   shape('a' => »bool«) $s,
10 | ): void {
11 |   expects_required_a_at_int($s);
12 | }

File "shape_subtyping.php", line 9, character 16 - line 9, character 19:

Here's why: this hint

 8 | function passes_required_a_at_bool(
 9 |   shape('a' => »bool«) $s,
10 | ): void {
11 |   expects_required_a_at_int($s);
12 | }

File "shape_subtyping.php", line 9, character 16 - line 9, character 19:

flows *into* this hint, via the required shape field `'a'`

 8 | function passes_required_a_at_bool(
 9 |   »shape('a' => bool)« $s,
10 | ): void {
11 |   expects_required_a_at_int($s);
12 | }

File "shape_subtyping.php", line 9, character 3 - line 9, character 20:

which itself flows *into* this expression

 8 | function passes_required_a_at_bool(
 9 |   shape('a' => bool) »$s«,
10 | ): void {
11 |   expects_required_a_at_int($s);
12 | }

File "shape_subtyping.php", line 9, character 22 - line 9, character 23:

which itself flows *into* this expression

  8 | function passes_required_a_at_bool(
  9 |   shape('a' => bool) $s,
 10 | ): void {
 11 |   expects_required_a_at_int(»$s«);
 12 | }

File "shape_subtyping.php", line 11, character 29 - line 11, character 30:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

  8 | function passes_required_a_at_bool(
  9 |   shape('a' => bool) $s,
 10 | ): void {
 11 |   »expects_required_a_at_int«($s);
 12 | }

File "shape_subtyping.php", line 11, character 3 - line 11, character 27:

which itself flows *from* this declaration

 3 | function »expects_required_a_at_int«(
 4 | shape('a' => int) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 3, character 10 - line 3, character 34:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 3 | function expects_required_a_at_int(
 4 | »shape('a' => int)« $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 1 - line 4, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

error: Typing[4110] Invalid argument

Expected `int`

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

But got `bool`

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => »bool«);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 28, character 40 - line 28, character 43:

Here's why: this hint

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => »bool«);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 28, character 40 - line 28, character 43:

flows *into* this hint, via the required shape field `'a'`

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = »shape('a' => bool)«;
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 28, character 27 - line 28, character 44:

which itself flows *into* this hint

 38 | function passes_required_a_at_bool_alias(
 39 |   »required_a_at_bool« $s,
 40 | ): void {
 41 |   expects_required_a_at_int_alias($s);
 42 | }

File "shape_subtyping.php", line 39, character 3 - line 39, character 20:

which itself flows *into* this expression

 38 | function passes_required_a_at_bool_alias(
 39 |   required_a_at_bool »$s«,
 40 | ): void {
 41 |   expects_required_a_at_int_alias($s);
 42 | }

File "shape_subtyping.php", line 39, character 22 - line 39, character 23:

which itself flows *into* this expression

 38 | function passes_required_a_at_bool_alias(
 39 |   required_a_at_bool $s,
 40 | ): void {
 41 |   expects_required_a_at_int_alias(»$s«);
 42 | }

File "shape_subtyping.php", line 41, character 35 - line 41, character 36:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 38 | function passes_required_a_at_bool_alias(
 39 |   required_a_at_bool $s,
 40 | ): void {
 41 |   »expects_required_a_at_int_alias«($s);
 42 | }

File "shape_subtyping.php", line 41, character 3 - line 41, character 33:

which itself flows *from* this declaration

 33 | function »expects_required_a_at_int_alias«(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 33, character 10 - line 33, character 40:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

which itself flows *into* this hint

 33 | function expects_required_a_at_int_alias(
 34 | »required_a_at_int« $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 34, character 1 - line 34, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

error: Typing[4163] Invalid argument

The field `a` is **optional**

 14 | function passes_optional_a_at_int(
 15 |   »shape(?'a' => int)« $s,
 16 | ): void {
 17 |   expects_required_a_at_int($s);
 18 | }

File "shape_subtyping.php", line 15, character 3 - line 15, character 20:

The field `a` is defined as **required**

 3 | function expects_required_a_at_int(
 4 | »shape('a' => int)« $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 1 - line 4, character 17:

`a` is defined here

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

Here's why: this hint

 14 | function passes_optional_a_at_int(
 15 |   shape(?'a' => »int«) $s,
 16 | ): void {
 17 |   expects_required_a_at_int($s);
 18 | }

File "shape_subtyping.php", line 15, character 17 - line 15, character 19:

flows *into* this hint, via the optional shape field `'a'`

 14 | function passes_optional_a_at_int(
 15 |   »shape(?'a' => int)« $s,
 16 | ): void {
 17 |   expects_required_a_at_int($s);
 18 | }

File "shape_subtyping.php", line 15, character 3 - line 15, character 20:

which itself flows *into* this expression

 14 | function passes_optional_a_at_int(
 15 |   shape(?'a' => int) »$s«,
 16 | ): void {
 17 |   expects_required_a_at_int($s);
 18 | }

File "shape_subtyping.php", line 15, character 22 - line 15, character 23:

which itself flows *into* this expression

 14 | function passes_optional_a_at_int(
 15 |   shape(?'a' => int) $s,
 16 | ): void {
 17 |   expects_required_a_at_int(»$s«);
 18 | }

File "shape_subtyping.php", line 17, character 29 - line 17, character 30:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 14 | function passes_optional_a_at_int(
 15 |   shape(?'a' => int) $s,
 16 | ): void {
 17 |   »expects_required_a_at_int«($s);
 18 | }

File "shape_subtyping.php", line 17, character 3 - line 17, character 27:

which itself flows *from* this declaration

 3 | function »expects_required_a_at_int«(
 4 | shape('a' => int) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 3, character 10 - line 3, character 34:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 3 | function expects_required_a_at_int(
 4 | »shape('a' => int)« $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 1 - line 4, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

error: Typing[4163] Invalid argument

The field `a` is **optional**

 20 | function passes_optional_a_at_bool(
 21 |   »shape(?'a' => bool)« $s,
 22 | ): void {
 23 |   expects_required_a_at_int($s);
 24 | }

File "shape_subtyping.php", line 21, character 3 - line 21, character 21:

The field `a` is defined as **required**

 3 | function expects_required_a_at_int(
 4 | »shape('a' => int)« $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 1 - line 4, character 17:

`a` is defined here

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

Here's why: this hint

 20 | function passes_optional_a_at_bool(
 21 |   shape(?'a' => »bool«) $s,
 22 | ): void {
 23 |   expects_required_a_at_int($s);
 24 | }

File "shape_subtyping.php", line 21, character 17 - line 21, character 20:

flows *into* this hint, via the optional shape field `'a'`

 20 | function passes_optional_a_at_bool(
 21 |   »shape(?'a' => bool)« $s,
 22 | ): void {
 23 |   expects_required_a_at_int($s);
 24 | }

File "shape_subtyping.php", line 21, character 3 - line 21, character 21:

which itself flows *into* this expression

 20 | function passes_optional_a_at_bool(
 21 |   shape(?'a' => bool) »$s«,
 22 | ): void {
 23 |   expects_required_a_at_int($s);
 24 | }

File "shape_subtyping.php", line 21, character 23 - line 21, character 24:

which itself flows *into* this expression

 20 | function passes_optional_a_at_bool(
 21 |   shape(?'a' => bool) $s,
 22 | ): void {
 23 |   expects_required_a_at_int(»$s«);
 24 | }

File "shape_subtyping.php", line 23, character 29 - line 23, character 30:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 20 | function passes_optional_a_at_bool(
 21 |   shape(?'a' => bool) $s,
 22 | ): void {
 23 |   »expects_required_a_at_int«($s);
 24 | }

File "shape_subtyping.php", line 23, character 3 - line 23, character 27:

which itself flows *from* this declaration

 3 | function »expects_required_a_at_int«(
 4 | shape('a' => int) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 3, character 10 - line 3, character 34:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 3 | function expects_required_a_at_int(
 4 | »shape('a' => int)« $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 1 - line 4, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 3 | function expects_required_a_at_int(
 4 | shape('a' => »int«) $s,
 5 | ): void {
 6 | }

File "shape_subtyping.php", line 4, character 14 - line 4, character 16:

error: Typing[4163] Invalid argument

The field `a` is **optional**

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = »shape(?'a' => int)«;
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 29, character 26 - line 29, character 43:

The field `a` is defined as **required**

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

`a` is defined here

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

Here's why: this hint

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => »int«);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 29, character 40 - line 29, character 42:

flows *into* this hint, via the optional shape field `'a'`

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = »shape(?'a' => int)«;
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 29, character 26 - line 29, character 43:

which itself flows *into* this hint

 44 | function passes_optional_a_at_int_alias(
 45 |   »optional_a_at_int« $s,
 46 | ): void {
 47 |   expects_required_a_at_int_alias($s);
 48 | }

File "shape_subtyping.php", line 45, character 3 - line 45, character 19:

which itself flows *into* this expression

 44 | function passes_optional_a_at_int_alias(
 45 |   optional_a_at_int »$s«,
 46 | ): void {
 47 |   expects_required_a_at_int_alias($s);
 48 | }

File "shape_subtyping.php", line 45, character 21 - line 45, character 22:

which itself flows *into* this expression

 44 | function passes_optional_a_at_int_alias(
 45 |   optional_a_at_int $s,
 46 | ): void {
 47 |   expects_required_a_at_int_alias(»$s«);
 48 | }

File "shape_subtyping.php", line 47, character 35 - line 47, character 36:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 44 | function passes_optional_a_at_int_alias(
 45 |   optional_a_at_int $s,
 46 | ): void {
 47 |   »expects_required_a_at_int_alias«($s);
 48 | }

File "shape_subtyping.php", line 47, character 3 - line 47, character 33:

which itself flows *from* this declaration

 33 | function »expects_required_a_at_int_alias«(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 33, character 10 - line 33, character 40:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

which itself flows *into* this hint

 33 | function expects_required_a_at_int_alias(
 34 | »required_a_at_int« $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 34, character 1 - line 34, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

error: Typing[4163] Invalid argument

The field `a` is **optional**

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = »shape(?'a' => bool)«;
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 30, character 27 - line 30, character 45:

The field `a` is defined as **required**

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

`a` is defined here

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

Here's why: this hint

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => »bool«);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 30, character 41 - line 30, character 44:

flows *into* this hint, via the optional shape field `'a'`

 27 | type required_a_at_int = shape('a' => int);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = »shape(?'a' => bool)«;
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 30, character 27 - line 30, character 45:

which itself flows *into* this hint

 50 | function passes_optional_a_at_bool_alias(
 51 |   »optional_a_at_bool« $s,
 52 | ): void {
 53 |   expects_required_a_at_int_alias($s);
 54 | }

File "shape_subtyping.php", line 51, character 3 - line 51, character 20:

which itself flows *into* this expression

 50 | function passes_optional_a_at_bool_alias(
 51 |   optional_a_at_bool »$s«,
 52 | ): void {
 53 |   expects_required_a_at_int_alias($s);
 54 | }

File "shape_subtyping.php", line 51, character 22 - line 51, character 23:

which itself flows *into* this expression

 50 | function passes_optional_a_at_bool_alias(
 51 |   optional_a_at_bool $s,
 52 | ): void {
 53 |   expects_required_a_at_int_alias(»$s«);
 54 | }

File "shape_subtyping.php", line 53, character 35 - line 53, character 36:

which itself flows *into* this expression, via the (contravariant) 1st function parameter

 50 | function passes_optional_a_at_bool_alias(
 51 |   optional_a_at_bool $s,
 52 | ): void {
 53 |   »expects_required_a_at_int_alias«($s);
 54 | }

File "shape_subtyping.php", line 53, character 3 - line 53, character 33:

which itself flows *from* this declaration

 33 | function »expects_required_a_at_int_alias«(
 34 | required_a_at_int $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 33, character 10 - line 33, character 40:

which itself flows *into* this hint, via the (contravariant) 1st function parameter

 27 | type required_a_at_int = »shape('a' => int)«;
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 26 - line 27, character 42:

which itself flows *into* this hint

 33 | function expects_required_a_at_int_alias(
 34 | »required_a_at_int« $s,
 35 | ): void {
 36 | }

File "shape_subtyping.php", line 34, character 1 - line 34, character 17:

which itself flows *into* this hint, via the required shape field `'a'`

 27 | type required_a_at_int = shape('a' => »int«);
 28 | type required_a_at_bool = shape('a' => bool);
 29 | type optional_a_at_int = shape(?'a' => int);
 30 | type optional_a_at_bool = shape(?'a' => bool);
 31 | type missing_a = shape('b' => int);

File "shape_subtyping.php", line 27, character 39 - line 27, character 41:

8 errors found.
